/*!wipe-yl0.0.1 发布日期:2018-11-12*/
var deliaX,deliaY,canvas=document.getElementById("cas"),context=cas.getContext("2d"),_w=cas.width,_h=cas.height,radius=20;function drawMask(e){e.fillStyle="#666",e.fillRect(0,0,_w,_h),e.globalCompositeOperation="destination-out"}function drawLine(e,n,t,o,a){e.save(),e.beginPath(),e.moveTo(n,t),e.lineTo(o,a),e.lineCap="round",e.lineWidth=2*radius,e.stroke(),e.restore()}var isMouseDown=!1;function getTransparencyPercent(e){for(var n=0,t=e.getImageData(0,0,_w,_h),o=0;o<t.data.length;o+=4){0===t.data[o+3]&&n++}var a=n/(_w*_h)*100;return console.log(a),Math.round(a)}function clear(e){e.clearRect(0,0,_w,_h)}cas.addEventListener("mousedown",function(e){var n=e||window.event;deliaX=n.clientX,deliaY=n.clientY,drawLine(context,deliaX,deliaY),isMouseDown=!0,console.log(isMouseDown)},!1),cas.addEventListener("mousemove",function(e){if(!0===isMouseDown){var n=e||window.event,t=n.clientX,o=n.clientY;drawLine(context,deliaX,deliaY,t,o),deliaX=t,deliaY=o,console.log(isMouseDown)}},!1),cas.addEventListener("mouseup",function(e){isMouseDown=!1;var n=context.getImageData(0,0,cas.width,cas.height);console.log(n),60<=getTransparencyPercent(context)&&(clear(context),alert("哈哈哈哈"))}),window.onload=function(){drawMask(context),isMouseDown=!1};